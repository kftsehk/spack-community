spack:
  concretizer:
    reuse: false
    targets:
      granularity: microarchitectures
      host_compatible: false
    unify: false
  definitions:
    - cc-test: ["zlib-ng ++ipo build_system=cmake ^zlib"]
  packages:
    all:
      providers:
        zlib-api: ["zlib"]
  specs:
    - matrix:
        - - $cc-test
        - - target=x86_64_v3
          - target=x86_64_v4
          - target=icelake
          - target=sapphirerapids
        - - "%oneapi@2023"
          - "%oneapi@2024"
          - "%oneapi@2025"
  view: false
