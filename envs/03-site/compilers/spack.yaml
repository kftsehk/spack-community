spack:
  concretizer:
    targets:
      granularity: generic
    unify: false
  definitions:
    - core_target:
        - "target=x86_64_v4 %gcc@13.3.0.spack"
    - dep_binutils:
        - matrix:
            - - "^binutils@2.43: +gas+headers+ld+lto+nls+plugins+gold"
            - - $core_target
    - aocc:
        - matrix:
            - - aocc +license-agreed
            - ["@5", "@4"]
            - - $core_target
    - gcc-nvptx:
        - matrix:
            - - "gcc +binutils~bootstrap+graphite+nvptx+piclibs languages=c,c++,fortran,lto"
            - ["@14", "@13"]
            - - $core_target
    - gcc:
        - matrix:
            - - "gcc +binutils~bootstrap+graphite+piclibs languages=c,c++,fortran,lto"
            - ["@12", "@11"]
            - - $dep_binutils
            - - $core_target
    - oneapi-nvptx:
        - matrix:
            - - "intel-oneapi-compilers +nvidia"
            - ["@2025", "@2024"]
            - - $core_target
    - oneapi:
        - matrix:
            - - "intel-oneapi-compilers"
            - ["@2023", "@2022"]
            - - $core_target
    - intel:
        - matrix:
            - - "intel-oneapi-compilers-classic@2021"
            - - $core_target
    - cuda:
        - matrix:
            - - "cuda +allow-unsupported-compilers +dev"
            - ["@12.6", "@12.5", "@12.4", "@12.3", "@12.2", "@12.1", "@12.0", "@11.8"]
            - - $core_target
    - nvhpc:
        - matrix:
            - - "nvhpc +blas +lapack +mpi"
            - - default_cuda=12.6 @24.11
              - default_cuda=12.5 @24.7
              - default_cuda=12.4 @24.5
              - default_cuda=12.3 @24.3
              - default_cuda=12.3 @23.11
              - default_cuda=12.2 @23.9
              - default_cuda=12.1 @23.5
              - default_cuda=12.0 @23.3
              - default_cuda=11.8 @22.11
            - - $core_target
  specs:
    - $gcc
    - $gcc-nvptx
    - $aocc
    - $oneapi
    - $oneapi-nvptx
    - $intel
    - $cuda
    - $nvhpc
  view: false
